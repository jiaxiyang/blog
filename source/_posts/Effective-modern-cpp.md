---
title: Effective modern cpp
date: 2020-08-14 10:56:45
categories:
- Program
- Cpp
tags:
- Cpp
---


## 绪论
1. `右值`对应的是函数返回的临时对象，`左值`是可指涉的对象，可通过名字，指针等来标识。
1. 判断左值右值方法： 判断是否能取得地址。如果能取得地址则是左值，不能则为右值。例如`Widget(Widget&& rhs);`其中rhs为左值，因为函数体内对rhs取地址没有问题。相当于rhs被右值初始化，接受了右值。
1. 函数中，`实参`是用来初始化`形参`的。
1. 形参都是左值，而作为其初始化依据的实参，既能是右值，也可能是左值。例：`Widget(Widget& rhs);`rhs是左值，传入的实参也是左值。`Widget(Widget&& rhs);`rhs是左值，传入的实参是右值。
1. `声明`的作用是引入名字和类型，而不给出细节。如存储位置或具体实现。`定义`则会给存储位置和具体实现的细节。定义同时也可以当声明用。
1. `函数的签名`：只包含形参类别和返回值类别，不包含函数名字和形参名字。例如：`bool(const Widget&)`

## 第一章 类型推到
1. C++98仅有一套类型推导规则，用于函数模板。C++11对其进行改进，并增加了两套，一套用于auto，一套用于decltype。C++14又扩展了使用语义。

### 条款1： 理解模板类别推导
1.


## 第三章 转向现代C++
### 在创建对象时注意区分()和{}
1. 对象初始化的方式包括使用小括号，使用等号，或是使用大括号：`int x(0); int y = 0; int z{0};` 等号加大括号等效于大括号`int z = {0};`
1. 大括号初始化又称为`统一初始化`。
1. 大括号可以用来对容器进行初始化，例如: `vector<int> v{1, 2, 3, 4};`
1. 类的成员变量在类的定义时可以用`{}`或者`=`进行初始化，不能使用`()`
1. 不可复制对象(例如：std::atomic)可以使用`{}`或者`()`进行初始化，不能使用`=`
1. 大括号初始化`禁止内建类型进行隐式窄化类型转化`。如：`double x, y; ... ; int sum{x+y};`编译出错，double无法用int表示。
1. C++规定，任何能够解析为声明的都要解析为声明。大括号初始化免疫。`Widget w1();`此处被解析为函数声明，而不是初始化w1调用构造函数。`Widget w2{};`调用无形参的构造函数来构造w2。
1. 大括号初始化时如果形参出现std::initializer_list会优先调用，此时可以小括号。
1. 模板内容进行创建时，应该使用小括号还是大括号是一个棘手问题。
